<!--
  * ÌååÏùºÎ™Ö : ConferenceDetail.vue
  * ÌååÏùº Í∏∞Îä• : [ÏÇ¨Ï†ÑÌòëÏùò > ÏÉÅÏÑ∏] ÌéòÏù¥ÏßÄ ÏûÖÎãàÎã§. Í≤∞Ïû¨ ÎÇ¥Ïó≠ÏùÑ ÌïúÎ≤àÏóê Î≥º Ïàò ÏûàÏúºÎ©∞, Ï£ºÎ¨∏ÎÇ¥Ïó≠ Í∞ÅÍ∞ÅÏùÑ ÏäπÏù∏ / Î∞òÎ†§ / Î≥ÄÍ≤Ω Ìï† Ïàò ÏûàÏäµÎãàÎã§.
  * ÏûëÏÑ±Ïûê : ÍπÄÏòàÎã¥ Ïô∏ 3Î™Ö
  * ÏµúÏ¢Ö ÏûëÏÑ±Ïùº : 2021-02-25
  * License By Shinsegae I&C
  * 2021-02-25 fix: Ïó≠Ìï† ÏÉùÏÑ±/ÏÉÅÏÑ∏ - Îã¥ÎãπÏûê ÏÑ†ÌÉù Ï¥àÍ∏∞ ÏÑ†ÌÉù ÏÑ∏ÌåÖ
 -->

<template>
  <div
    class="conference-detail"
    v-loading="loading"
    :element-loading-text="loadingText"
  >
    <h2 class="conference-section-title">
      <span>{{ $t('common.TERMS.orderInfo') }}</span>
      <a
        :class="['mdi', viewApplyInfo ? 'mdi-chevron-up' : 'mdi-chevron-down']"
        style="margin-left: 8px;"
        @click="viewApplyInfo = !viewApplyInfo"
      />
    </h2>
    <transition name="slide">
      <div
        class="conference-body"
        v-if="viewApplyInfo"
      >
        <conf-detail-apply :data="taskData" />
      </div>
    </transition>
    <!-- /. Ï£ºÎ¨∏ Ï†ïÎ≥¥ -->

    <h2
      class="conference-section-title"
      style="margin-top: 50px;"
    >
      {{ $t('task.PRIOR.DETAIL.content') }}
    </h2>
    <div class="conference-body">
      <article class="conf-lists">
        <h6 class="panel-sub-title">
          {{ $t('task.PRIOR.DETAIL.selectOrder') }}
        </h6>
        <conf-source-lists
          :data="orderDataList"
          @selectedOrder="selectTaskTableData"
        />
      </article>
    </div>
    <!-- ÏÇ¨Ï†Ñ ÌòëÏùò ÎÇ¥Ïö© -->

    <div class="conference-contents">
      <section class="conferenc-top-wrap">
        <h5 class="conference-title">
          {{ selectedOrderItem ? `[${selectedOrderItem.field}] ${selectedOrderItem.orderNo}` : $t('task.PRIOR.DETAIL.selectOrderP') }}
          {{ selectedOrderItem && selectedOrderItem.serviceDate ? selectedOrderItem.serviceDate : undefined }}
        </h5>
        <div
          class="-right"
          v-if="selectedOrderItem"
        >
          <div
            class="memo-wrap"
            style="margin-left: 10px;"
          >
            <button
              class="button icon-button"
              ref="d-memo"
              type="is-icon"
              @click="detailModal.momoDropdownModal = !detailModal.momoDropdownModal"
            >
              <i class="icon-bubble" />
              <span>{{ $t('task.PRIOR.DETAIL.memoList') }}</span>
            </button>

            <cmp-drop-down
              :active.sync="detailModal.momoDropdownModal"
              @close="detailModal.momoDropdownModal = false"
              class="memo-panel"
              custom-id="d-memo"
              transition-style="fade"
              right="0"
              :title="$t('task.TODO.DETAIL.note')"
              inner-close-btn
            >
              <task-memo
                :data="memoLists"
                size="mini"
                @change-memo="afterMemoUpdated"
              />
            </cmp-drop-down>
          </div>
        </div>
      </section>
      <!-- /. Ï£ºÎ¨∏Î≤àÌò∏ ÏÑ†ÌÉù ÏòÅÏó≠ -->

      <section
        class="empty-zone"
        v-if="!selectedOrderItem"
      >
        <span>{{ $t('task.PRIOR.DETAIL.selectOrderP') }}</span>
      </section>
      <!-- /. Ï£ºÎ¨∏Î≤àÌò∏ ÏÑ†ÌÉù ÏòÅÏó≠ - ÎπÑÏóàÏùÑ Îïå -->

      <template v-else>
        <article class="conf-process">
          <div
            class="empty-zone"
            v-if="!orderTabs.length"
          >
            {{ $t('task.PRIOR.DETAIL.emptyOrder') }}
          </div>
          <g-foldable
            ref="confList"
            v-for="item in orderTabs"
            :key="item.roleIdx"
            :title="item.name"
            :use-state="item.orderType"
            :overlapped-mem="item.updateTime | date"
          >
            <template #header-suffix>
              <conference-checklist
                v-if="item.beforeCheckList && item.beforeCheckList.length"
                :data="item.beforeCheckList"
                style="margin-left: 20px;"
                right="-90px"
                @save="updateTaskPreChkList(...arguments, item)"
              />
            </template>
            <!-- ÌôïÏù∏ÏÇ¨Ìï≠ -->

            <template #contents>
              <!-- ‚òòÔ∏è Í∂åÌïú {{ item.name }} : {{ item.hasPerm }} -->
              <section
                class="resource-area"
                v-for="resource in item.resourceList"
                :key="resource.id"
              >
                <!-- üå∏  ÎîîÎ≤ÑÍπÖÏö©ÏûÖÎãàÎã§!! ÏßÄÏö∞ÏßÄ ÎßàÏÑ∏Ïöî! -->
                <!-- üå∏ ÏõåÌÅ¨ÌîåÎ°úÏö∞ Í∏∞Î∞òÏúºÎ°ú Ìé∏ÏßëÎê† Ïàò ÏûàÎäîÍ∞Ä? :: {{ resource.editable }} <br><br> -->

                <!-- """Í∂åÌïú : {{ item.hasPerm }}, [{{ resource.name }}] ÏùòÏõåÌÅ¨ÌîåÎ°úÏö∞ Ìé∏Ïßë Í∞ÄÎä• : {{ resource.editable }}, ÏäπÏù∏ Ï≤òÎ¶¨ Ïó¨Î∂Ä : {{ item.isApproval }}"""" -->
                <template v-if="resource.name === 'compute' || resource.name === 'ova'">
                  <task-compute
                    :data="resource.data"
                    :order-data="resource"
                    field="conference"
                    :order-type="item.orderType"
                    :editable="resource.editable && !item.isApproval && item.hasPerm && !item.isRejected && item.orderType !== 'delete'"
                    @update="updateComputeData"
                  />
                </template>

                <!-- <template v-if="resource.name === 'market'">
                  <task-marketplace
                    :data="resource.data"
                    :order-data="resource"
                    field="conference"
                    :order-type="item.orderType"
                    :editable="resource.editable && !item.isApproval && item.hasPerm && !item.isRejected && item.orderType !== 'delete'"
                    @update="updateMarketplaceData"
                  />
                </template> -->

                <!-- <template v-if="resource.name === 'database'">
                  <task-database
                    :data="resource.data"
                    field="conference"
                    :order-type="item.orderType"
                    :editable="resource.editable && !item.isApproval && item.hasPerm && !item.isRejected && item.orderType !== 'delete'"
                    @update="updateDatabaseData"
                  />
                </template> -->

                <template v-if="resource.name === 'storage'">
                  <task-storage
                    :data="resource.data"
                    field="conference"
                    :order-type="item.orderType"
                    :editable="resource.editable && !item.isApproval && item.hasPerm && !item.isRejected && item.orderType !== 'delete'"
                    @update="updateStorageData"
                  />
                </template>

                <!-- <template v-if="resource.name === 'network_l4'">
                  <task-l4
                    :data="resource.data"
                    field="conference"
                    :order-type="item.orderType"
                    :editable="resource.editable && !item.isApproval && item.hasPerm && !item.isRejected && item.orderType !== 'delete'"
                    @update="updateL4Data"
                  />
                </template> -->
                <!-- <template v-if="resource.name === 'network_l7'">
                  <task-l7
                    :data="resource.data"
                    field="conference"
                    :order-type="item.orderType"
                    :editable="resource.editable && !item.isApproval && item.hasPerm && !item.isRejected && item.orderType !== 'delete'"
                    @update="updateL7Data"
                  />
                </template> -->
                <!--
                <template v-if="resource.name === 'security'">
                  <task-security
                    :data.sync="resource.data"
                    field="conference"
                    :order-type="item.orderType"
                    :editable="resource.editable && !item.isApproval && item.hasPerm && !item.isRejected && item.orderType !== 'delete'"
                    @update="updateSecurityData"
                    :order-info.sync="orderInfo"
                  />
                </template> -->
              </section>

              <!-- üå∏  ÎîîÎ≤ÑÍπÖÏö©ÏûÖÎãàÎã§!! ÏßÄÏö∞ÏßÄ ÎßàÏÑ∏Ïöî! -->
              <!-- <br><br>üå∏ Í∂åÌïú : {{ item.hasPerm }}, ÎÇ¥Î∂Ä ÏûêÏõêÏ§ëÏóê Ìé∏Ïßë Í∞ÄÎä•Ìïú ÏûêÏõêÏù¥ ÏûàÎäîÏßÄ : {{ item.workEditable }}, ÏäπÏù∏ Ï≤òÎ¶¨ Ïó¨Î∂Ä: {{ item.isApproval }}
              <br><br>üî∂ Î™®Îì† ÏûêÏõêÏùÑ Í∏∞Î∞òÏúºÎ°ú ÏäπÏù∏Î≤ÑÌäº ÎÖ∏Ï∂ú Í∞ÄÎä•? {{ !item.isApproval && item.hasPerm && item.workEditable }} -->
              <div
                class="button-area"
                style="margin-top: 20px;"
                v-if="!item.isApproval && item.hasPerm && item.workEditable && !item.isRejected"
              >
                <button
                  class="button"
                  size="is-large"
                  type="is-primary"
                  @click="approveButtonAction(item)"
                >
                  <!-- ÏäπÏù∏ -->
                  {{ $t('common.BTN.TASK.ack') }}
                </button>
              </div>
            </template>
          </g-foldable>
        </article>
      </template>
    </div>

    <div
      class="big-button-area -bottom"
      v-if="selectedOrderItem && showRejection"
    >
      <button
        class="button"
        size="is-large"
        @click="rejectButtonAction"
      >
        <!-- Ï£ºÎ¨∏ Î∞òÎ†§ -->
        {{ $t('common.BTN.TASK.orderReject') }}
      </button>
    </div>

    <!-- Î™®Îã¨ -->
    <el-dialog
      class="none-header approve-modal"
      :title="`${approveStep.currentStep} ${$t('task.PRIOR.try')}`"
      :visible.sync="approveStep.visible"
      width="330px"
      top="35vh"
    >
      <div v-if="approveStep.currentStep === 'Ïã§Ìå®'">
        <p class="action-message">
          {{ $t('task.PRIOR.DETAIL.actionMessage') }}
        </p>

        <div>
          <el-input
            type="textarea"
            :autosize="{ minRows: 5, maxRows: 6 }"
            :placeholder="$t('task.TODO.DETAIL.enterFail')"
            resize="none"
            v-model="failReason"
            style="margin-top: 10px;"
          />
        </div>
      </div>

      <div v-if="approveStep.currentStep === 'Î∞òÎ†§'">
        <p
          class="action-message"
          v-html="$t('task.PRIOR.DETAIL.message')"
        />

        <div>
          <el-input
            type="textarea"
            :autosize="{ minRows: 4, maxRows: 4 }"
            :placeholder="$t('common.PLACEHOLDER.enterReject')"
            resize="none"
            v-model="rejectReason"
          />
        </div>
      </div>

      <div class="modal-button-area">
        <button
          class="button -modal-button"
          @click="closeModal"
        >
          <!-- Ï∑®ÏÜå -->
          {{ $t('common.BTN.cancel') }}
        </button>
        <button
          class="button -modal-button"
          type="is-primary"
          @click="approvalReject"
        >
          <!-- ÌôïÏù∏ -->
          {{ $t('common.BTN.confirm') }}
        </button>
      </div>
    </el-dialog>
    <!-- Î∞òÎ†§Ï≤òÎ¶¨ Î™®Îã¨ -->

    <!-- Ï°∞ÏßÅÎèÑ Î™®Îã¨ -->
    <approval-modal
      v-if="blsmModal"
      :active.sync="blsmModal"
      @close="blsmModal = false"
      :resource-list="resourceList"
      @confirm="setTask"
    />
  </div>
</template>

<script>
import { mapState } from 'vuex'
import Dayjs from 'dayjs'
import VueCookies from 'vue-cookies'

import GFoldable from '@/components/common/g-foldable/g-foldable'
import CMPDropDown from '@/components/common/g-drop-down/cmp-drop-down'
import TaskMemo from '../../TaskMemo/TaskMemo'
import ConferenceCheckList from '@/components/ConferenceCheckList/ConferenceCheckList'
import ApprovalMemberModal from '@/components/Modal/ApprovalMemberModal/ApprovalMemberModal'
import ConfDetailApply from './ConfDetailApply'
import ConfSourceLists from './ConfSourceLists'

import TaskCompute from '../../TaskResource/TaskCompute/TaskCompute'
// import TaskMarketplace from '../../TaskResource/TaskMarketplace/TaskMarketplace'
// import TaskDatabase from '../../TaskResource/TaskDatabase/TaskDatabase'
import TaskStorage from '../../TaskResource/TaskStorage/TaskStorage'
// import TaskL4 from '../../TaskResource/TaskNetwork/TaskL4/TaskL4'
// import TaskL7 from '../../TaskResource/TaskNetwork/TaskL7/TaskL7'
// import TaskSecurity from '../../TaskResource/TaskSecurity/TaskSecurity'
import TaskDetailCommon from '../../TaskDetailCommon'

import API from '@/components/Apis/'

export default {
  name: 'ConferenceDetail',
  components: {
    'g-foldable': GFoldable,
    'cmp-drop-down': CMPDropDown,

    'conf-detail-apply': ConfDetailApply,
    'conf-source-lists': ConfSourceLists,

    'task-compute': TaskCompute,
    // 'task-marketplace': TaskMarketplace,
    // 'task-database': TaskDatabase,
    'task-storage': TaskStorage,
    // 'task-l4': TaskL4,
    // 'task-l7': TaskL7,
    // 'task-security': TaskSecurity,

    'task-memo': TaskMemo,
    'conference-checklist': ConferenceCheckList,
    'approval-modal': ApprovalMemberModal
  },
  mixins: [TaskDetailCommon],
  watch: {
    selectedOrderItem (item) {
      this.setOrderTabs()
    }
  },
  computed: {
    ...mapState({
      user: state => state.auth.user,
      packageType: state => state.auth.packageType
    })
  },
  created () {
    this.initialize()
    // this.getApprovalStatus() // ‚ùå
  },
  methods: {
    async getApprovalStatus () {
      const data = await API.admin.settings.getApprovalSetting()
      this.approvalStatus = data.useYn
      // this.approvalStatus = false // Í≤∞Ïû¨ ÎØ∏ÏÇ¨Ïö© ÌÖåÏä§Ìä∏ ÏΩîÎìú false Ïùº Í≤ΩÏö∞
    },
    /**
     * ÌôîÎ©¥ Ï≤òÏùå ÏßÑÏûÖÏãú ÏÑ§Ï†ïÌï¥Ï§çÎãàÎã§.
     */
    async initialize () {
      await this.setDetailData()
      if (this.$route.params.id) this.setBreadCrumbs(this.taskData)
    },
    /**
     * Í∏∞Î≥∏ Îç∞Ïù¥ÌÑ∞Î•º ÏÑ∏ÌåÖÌï¥Ï§çÎãàÎã§.
     */
    async setDetailData () {
      this.selectedOrderItem = null
      this.orderTabsOrigin = []
      this.orderTabs = JSON.parse(JSON.stringify(this.orderTabsOrigin))
      const response = await this.getTaskPreDetail()

      // console.log(response, ' ---- üê£ ConferenceDetail DATA')
      if (response) {
        this.taskData = response
        this.orderDataList = [...response.orders]
      }
    },
    /**
     * ÏóÖÎ¨¥ Îç∞Ïù¥ÌÑ∞Î•º Í∞ÄÏ†∏ÏòµÎãàÎã§.
     */
    async getTaskPreDetail () {
      try {
        this.loading = true
        const response = await API.task.getTaskPreDetail(this.$route.params.id)

        if (!response || response.status) {
          return this.$router.replace({ name: 'not-found-status', params: { code: response.status } })
        }
        return response
      } catch (error) {
        console.error('@@@ getTaskPreDetail Error : ', error)
        const message = {
          ODR1004: 'Ìï¥Îãπ Ìã∞ÏºìÏù¥ Ï°¥Ïû¨ÌïòÏßÄ ÏïäÏäµÎãàÎã§.'
        }
        this.$alert(message[error.response.data.code], 'ÏïåÎ¶º', {
          confirmButtonText: this.$t('common.BTN.confirm'),
          callback: () => {
            // Ìã∞Ïºì ÏóÜÎäîÍ≤ΩÏö∞ Î™©Î°ùÏúºÎ°ú ÌäïÍ≤®ÎÇ¥Í∏∞
            if (error.response.data.code === 'ODR1004') return this.$router.replace({ name: 'task-list' })
            return false
          }
        })
      } finally {
        this.loading = false
      }
    },
    // ÎπµÍ∞ÄÎ£® Ï≤òÎ¶¨
    setBreadCrumbs (data = this.taskData) {
      let state = 'WAIT'
      const today = Dayjs(new Date())
      const date = Dayjs(new Date(data.finishTime))
      const interval = this.$options.filters.interval(today, date)

      const isApproved = []
      this.orderDataList.forEach(list => {
        for (const role of list.roles) isApproved.push(role.isApproval)
      })
      state = isApproved.some(apprv => apprv) ? 'PROCEED' : state
      if (interval > 0) state = 'DELAY'

      let taskStatus

      // 'ÎØ∏Ï†ï'Í±¥ Ï≤òÎ¶¨
      if (data.finishTime) {
        taskStatus = `D${interval < 0 ? '' : '+'}${interval} ${this.status[state].ko}`
      } else {
        taskStatus = this.status.undefined.ko
      }

      // const taskStatus = `D${interval < 0 ? '' : '+'}${interval} ${this.status[state].ko}`
      const crumb = VueCookies.get('CMPLang') === 'en' ? '' : this.$t('common.TERMS.payNumber')
      this.$store.commit('common/ADD_PARAMETERS', {
        label: `${crumb} ${this.$route.params.id}`,
        path: '',
        statusKo: taskStatus,
        status: this.status[state].color
      })
    },
    /**
     * Îç∞Ïù¥ÌÑ∞ Í∞ÄÍ≥µ / Ï£ºÎ¨∏Î≤àÌò∏ ÎÇ¥Î∂Ä Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏùÑ Í≤ΩÏö∞ Ìï¥Îãπ tabÏùÑ ÏÇ≠Ï†úÌï©ÎãàÎã§ (Ï§ëÏöî! Î©îÏù∏ Í∏∞Îä•)
     */
    setOrderTabs (orderTabsOrigin = this.orderTabsOrigin) {
      const copyTabs = JSON.parse(JSON.stringify(orderTabsOrigin))
      const tabsHasData = copyTabs.filter(tab => tab.orderDataList)
      this.showRejection = false

      this.orderTabs = tabsHasData.map(data => {
        // Í∂åÌïú ÏÑ§Ï†ï - Î≥ÄÍ≤Ω Í∂åÌïúÏù¥ÏûàÏùÑ Í≤ΩÏö∞ true : ÏóÜÏùÑ Í≤ΩÏö∞ false
        let hasPerm = false
        if (this.user.userPermLevel === 0) hasPerm = true
        else {
          const hasPermLen = this.user.userPermUpperRoleList?.filter(perm => perm.roleUpperName === data.roleName).length
          hasPerm = Boolean(hasPermLen)
        }

        // ÏäπÏù∏ Ïó¨Î∂Ä ÌôïÏù∏
        const isApproval = !(data.isApproval === undefined || data.isApproval === false)

        // Ìé∏Ïßë Í∞ÄÎä•Ïó¨Î∂Ä ÏÑ§Ï†ï
        const editValidator = data.taskList.map(list => {
          const type = list.workType === 'OVA' ? 'COMPUTE' : list.workType
          return { type: type.toLowerCase(), editable: list.workFlowTaskExecutePerm }
        })

        // ['COMPUTE', 'NETWORK_L7'....] Ï§ëÎ≥µÏóÜÎäî Í∑∏Î¶¨Îìú Î¶¨Ïä§Ìä∏ Ï†úÏûë
        const workTypesTemp = new Set(data.orderDataList.map(list => {
          const type = list.workType === 'OVA' ? 'COMPUTE' : list.workType
          return type
        }))
        // const workTypesTemp = new Set(data.orderDataList.map(list => list.workType))

        // ÏóÖÎ¨¥ ÌÉ≠ ÎÇ¥Î∂Ä Îç∞Ïù¥ÌÑ∞ Í∞ÄÍ≥µ
        const workTypes = Array.from(workTypesTemp).map(type => {
          // Í∞Å grid Îç∞Ïù¥ÌÑ∞ ÏûÖÎ†•
          // ## [OVA] ova ÏûêÏõê  computeÏôÄ ÎèôÏùºÌïòÍ≤å Ï≤òÎ¶¨..
          const filteredTypeGridData = data.orderDataList.filter(list => {
            if (list.workType === 'OVA' && type === 'COMPUTE') return list
            else if (list.workType === type) return list
          })
          const gridData = filteredTypeGridData.map(list => list.orderData)
          const orderDataIdx = filteredTypeGridData.map(list => list.orderDataIdx)[0]

          // ÏõåÌÅ¨ÌîåÎ°úÏö∞ ÎÇ¥ on ÏúºÎ°ú ÌôúÏÑ±ÌôîÎêòÏñ¥ÏûàÏùÑ Í≤ΩÏö∞(Î≥ÄÍ≤Ω Í∞ÄÎä•Ìï† Í≤ΩÏö∞)
          let taskGridData = {}
          editValidator.forEach(work => {
            const customType = type === 'OVA' ? 'COMPUTE' : type
            if (work.type.toLowerCase() === customType.toLowerCase()) {
              taskGridData = {
                name: type.toLowerCase(),
                orderDataIdx,
                data: gridData,
                editable: customType.toLowerCase() === work.type ? work.editable : false, // ÏõåÌÅ¨ÌîåÎ°úÏö∞ Í∏∞Î∞ò Ìé∏Ïßë Í∞ÄÎä• Ïó¨Î∂Ä
                rawInfo: JSON.parse(JSON.stringify(data)) // [Î≥ÄÍ≤Ω/Ï†ÄÏû•] Î≤ÑÌäº ÌÅ¥Î¶≠Ïãú Îç∞Ïù¥ÌÑ∞Î•º Í∑∏ÎåÄÎ°ú Î≥¥ÎÇ¥Í∏∞ ÏúÑÌïú ÌãÄ(?)
              }
            }
          })

          return taskGridData
        })

        // Ìé∏Ïßë Í∞ÄÎä• Ïó¨Î∂Ä
        const workEditable = workTypes.some(work => work.editable)

        // ÏÇ¨Ï†Ñ ÌôïÏù∏ÏÇ¨Ìï≠
        return {
          roleName: data.roleName,
          roleIdx: data.roleIdx,
          name: data.roleName,
          hasPerm,
          workEditable,
          orderType: data.orderType,
          resourceList: workTypes,
          beforeCheckList: data.beforeCheckList,
          isRejected: this.orderInfo.proceedStatus === 'REJECT',
          isApproval // ÏäπÏù∏ Î≤ÑÌäº ÎÖ∏Ï∂ú Ïó¨Î∂Ä (ÏäπÏù∏Ïó¨Î∂Ä)
        }
      })

      // Î∞òÎ†§ Î≤ÑÌäº ÏÑ§Ï†ï
      //    -> ÏµúÍ≥† Í¥ÄÎ¶¨ÏûêÏùºÍ≤ΩÏö∞ || ÌäπÏ†ï ÏõåÌÅ¨ÌîåÎ°úÏö∞ Í∂åÌïúÏù¥ ÌïòÎÇòÎùºÎèÑ ÏûàÏúºÎ©¥ Î∞òÎ†§Î≤ÑÌäºÏùÑ Î≥¥Ïó¨Ï§çÎãàÎã§. (ÏúÑÏóêÏÑú Ïù¥ÎØ∏ ÏÑ§Ï†ïÌï¥Îë†)
      //    -> && (Î™®Îëê ÏäπÏù∏Ïù¥ ÏôÑÎ£åÎêú Í≤ΩÏö∞ || Ïù¥ÎØ∏ Î∞òÎ†§Í∞Ä Îêú Í≤ΩÏö∞)Í∞Ä ÏïÑÎãåÍ≤ΩÏö∞ÏóêÎßå Î≥¥Ïó¨Ï§çÎãàÎã§.
      const rejectPerm = this.orderTabs.some(order => order.hasPerm && order.workEditable)
      const processed = this.orderTabs.every(order => order.isApproval) || this.orderInfo.proceedStatus === 'REJECT'
      this.showRejection = rejectPerm && !processed

      // console.log('%c ------ orderTabs', 'color: #9AE2FF')
      // console.log(this.orderTabs, this.showRejection)
      // console.log('Ïú†Ï†Ä ÏõåÌÅ¨ÌîåÎ°úÏö∞ Í∂åÌïú :: ', this.user.userPermUpperRoleList)
    },
    /**
     * Ï£ºÎ¨∏Î≤àÌò∏ ÏÑ†ÌÉùÏãú Î∞úÏÉùÌïòÎäî Ïù¥Î≤§Ìä∏
     * @param {Object} orderData Ï£ºÎ¨∏Î≤àÌò∏Îì±Ïùò Ï†ïÎ≥¥Î•º Í∞ÄÏßëÎãàÎã§.
     */
    selectTaskTableData (orderData) {
      // console.log('%c orderData', 'color: #9D9AFF')
      // console.log(orderData, '-----orderData')

      // Ï£ºÎ¨∏Î≤àÌò∏ ÏÑ†ÌÉùÌï† ÎïåÎßàÎã§ ÌïòÎã® Î™®Îì† Ìè¥Îçî Îã´Í∏∞
      const confList = this.$refs.confList
      if (confList) {
        for (const list of confList) list.foldState = false
      }

      this.selectedOrderItem = orderData

      const taskSetting = this.orderDataList.filter(order => order.orderInfo.orderNo === orderData.orderNo)[0]
      this.orderTabsOrigin = taskSetting.roles.map(role => {
        role.orderType = taskSetting.orderInfo.orderType.toLowerCase()

        return role
      })

      this.orderInfo = taskSetting.orderInfo

      // Î©îÎ™® Ïù¥Î†• Îç∞Ïù¥ÌÑ∞ ÏûÖÎ†•
      this.memoLists = {
        approvalNo: this.$route.params.id,
        orderNo: orderData.orderNo,
        data: taskSetting.orderMemoList?.filter(list => list.orderNo === orderData.orderNo)
      }
    },
    /**
     * [ÏäπÏù∏] Î≤ÑÌäº ÌÅ¥Î¶≠Ïãú ÎèôÏûëÌï©ÎãàÎã§.
     * @param {Object} item Ïó≠Ìï† Îç∞Ïù¥ÌÑ∞
     */
    async approveButtonAction (item) {
      if (item.orderType === 'delete') {
        // ÏÇ≠Ï†ú ÏûêÏõêÏùº Í≤ΩÏö∞ compute vm Ïù¥ ÏÇ¨Ïö©ÎêòÍ≥†ÏûàÎäîÏßÄ ÌôïÏù∏Ìï©ÎãàÎã§.
        const target = item.resourceList.filter(source => source.name === 'compute')
        const hostNames = []
        for (const source of target) {
          for (const data of source.data) hostNames.push(data.hostname)
        }

        const allResp = [] // Ï†ÑÏ≤¥ ÏöîÏ≤≠Ïùò Í≤∞Í≥ºÎ•º Ï†ÄÏû•Ìï©ÎãàÎã§

        for (let i = 0; i < hostNames.length; i++) {
          const hostName = hostNames[i]
          try {
            this.loading = true
            this.loadingText = this.$t('common.ALERT.APPROVAL.017') // ÏÇ≠Ï†ú Í∞ÄÎä• Ïó¨Î∂ÄÎ•º ÌôïÏù∏Ï§ëÏûÖÎãàÎã§. Îã§ÏÜå ÏãúÍ∞ÑÏù¥ ÏÜåÏöîÎê† Ïàò ÏûàÏäµÎãàÎã§.

            // Í≤∞Ïû¨ ÌîåÎ°úÏö∞ ÌôïÏù∏
            const response = await API.task.vmWorkingCheck(hostName)
            allResp.push(response)
          } catch (error) {
            console.error(error)
          } finally {
            this.loading = false
            this.loadingText = ''
          }
        }

        const isUsing = await this.setUsingVmsToText(allResp)
        if (!isUsing) return
      }

      return this.proceedApprove(item)
    },
    /**
     * @function
     * @param {Object} item
     * Í≤∞Ïû¨ Ïã§Ìñâ => ÏäπÏù∏ Î≤ÑÌäº ÌÅ¥Î¶≠Ïãú Î™®Îã¨ Ïò§Ìîà
     */
    proceedApprove (item) {
      this.selectWorkTab = item
      this.resourceList = [this.$store.state?.auth?.user]
      if (this.approvalStatus === false) {
        const listData = []
        this.setTask(listData)
        return
      } // Í≤∞Ïû¨Ïûê Ï†ïÎ≥¥ ÏûÖÎ†• ÌõÑ ÏÑ±Í≥µ

      // (PLUS Î™®ÎìúÏùºÍ≤ΩÏö∞) Î∞îÎ°ú Í≤∞Ïû¨ Ïã†Ï≤≠
      if (this.packageType === 'PL') {
        return this.$confirm(this.$t('common.CONFIRM.APPROVAL.003'), { // Ìï¥Îãπ ÎÇ¥Ïö©ÏúºÎ°ú Í≤∞Ïû¨ÌïòÏãúÍ≤†ÏäµÎãàÍπå?
          confirmButtonText: this.$t('common.TERMS.yes'),
          cancelButtonText: this.$t('common.TERMS.no')
        })
          .then(this.approveWithoutMembers)
          .catch(() => false)
      }

      // (STAND, ENTER, BASIC Î™®ÎìúÏùºÍ≤ΩÏö∞) Ï°∞ÏßÅÎèÑ Î™®Îã¨ Ïò§Ìîà
      this.blsmModal = true
    },
    /**
     * @function - Î∞òÎ†§ Î≤ÑÌäº ÌÅ¥Î¶≠Ïãú Î™®Îã¨ Ïò§Ìîà
     */
    rejectButtonAction () {
      this.approveStep = {
        visible: true,
        currentStep: 'Î∞òÎ†§'
      }
    },
    /**
     * (PLUS Î™®ÎìúÏùº Í≤ΩÏö∞) Í≤∞Ïû¨ÏûêÎ•º ÌòÑÏû¨ Î°úÍ∑∏Ïù∏Ìïú Í¥ÄÎ¶¨Ïûê Ï†ïÎ≥¥Î°ú ÏÑ§Ï†ïÌïòÍ≥†, Í≤∞Ïû¨Î•º Ïã†Ï≤≠
     */
    approveWithoutMembers () {
      const { userCompanyCode, userCompanyName, userGroupCode, userDuty, userGroup, userGroupName, userId, userIdx, userName, userPosition } = this.user
      const userList = [{
        companyCode: userCompanyCode,
        companyName: userCompanyName,
        groupCode: userGroupCode,
        groupName: `${userCompanyName} ${userGroupName}`, // Ïã†ÏÑ∏Í≥ÑI&C Îç∞Ïù¥ÌÑ∞ÏÑºÌÑ∞ÌåÄ
        index: 0,
        no: 1,
        type: 'S', // Í≤∞Ïû¨ S / Ìï©Ïùò A
        userCompany: userCompanyCode,
        userDuty,
        userGroup,
        userId,
        userIdx,
        userName,
        userPosition
      }]

      return this.setTask(userList)
    },
    async setTask (userList, user = this.user) {
      const orderDataIdxList = this.selectWorkTab.resourceList[0].rawInfo.orderDataList.map(order => order.orderDataIdx)

      const approvalData = {
        approvalNo: this.$route.params.id,
        orderNo: this.selectedOrderItem?.orderNo,
        roleIdx: this.selectWorkTab.roleIdx,
        roleName: this.selectWorkTab.roleName,
        orderDataIdxList: orderDataIdxList,
        userId: user?.userId,
        userName: user?.userName,
        userPosition: user?.userPosition,
        groupIdx: user?.userGroup,
        groupName: user?.userGroupName,
        groupCode: user?.userGroupCode,
        companyIdx: user?.userCompany,
        companyName: user?.userCompanyName,
        companyCode: user?.userCompanyCode,
        approvalUsers: JSON.parse(JSON.stringify(userList))
      }

      // console.log('%c ==== blossom Îç∞Ïù¥ÌÑ∞Îûë Í∞ôÏù¥ Î≥¥ÎÇºÎïå JSON.....', 'color: #D0FF9A')
      // console.log(approvalData)
      // this.$router.push({ name: 'task-conference' })

      return this.requestTask(approvalData)
    },
    async requestTask (task) {
      try {
        this.loading = true
        await API.order.requestTask(task)
        // Í≤∞Ïû¨ Ïã†Ï≤≠Ïù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.
        return this.$alert(this.$t('common.ALERT.APPROVAL.009'), 'ÏïåÎ¶º', { confirmButtonText: this.$t('common.BTN.confirm') })
          .then(() => this.checkIsLastOrder())
      } catch (error) {
        if (this.isAlreadyProcessed(error)) return

        const errorType = {
          'Cluster is null': this.$t('common.ALERT.CONF.011'), // ÌÅ¥Îü¨Ïä§ÌÑ∞Î•º Î®ºÏ†Ä Ï∂îÍ∞ÄÌï¥Ï£ºÏÑ∏Ïöî
          'Host is null': this.$t('common.ALERT.CONF.015'), // HostÎ•º Î®ºÏ†Ä Ï∂îÍ∞ÄÌï¥Ï£ºÏÑ∏Ïöî,
          'Image is null': this.$t('common.ALERT.CONF.016'), // ImageÎ•º Î®ºÏ†Ä Ï∂îÍ∞ÄÌï¥Ï£ºÏÑ∏Ïöî,
          'Central is null': this.$t('common.ALERT.CONF.017'), // CentralÎ•º Î®ºÏ†Ä Ï∂îÍ∞ÄÌï¥Ï£ºÏÑ∏Ïöî,
          'Network is null': this.$t('common.ALERT.CONF.018'), // ÎÑ§Ìä∏ÏõåÌÅ¨Î•º Î®ºÏ†Ä Ï∂îÍ∞ÄÌï¥Ï£ºÏÑ∏Ïöî,
          'DB Parameter is null': this.$t('common.ALERT.CONF.019') // DB ParameterÎ•º Î®ºÏ†Ä Ï∂îÍ∞ÄÌï¥Ï£ºÏÑ∏Ïöî
        }[error.response.data.message]

        this.$alert(errorType || error, 'ÏïåÎ¶º', { confirmButtonText: this.$t('common.BTN.confirm') })
        return false
      } finally {
        this.loading = false
      }
    },
    /**
     * [ÏäπÏù∏] Ï≤òÎ¶¨ Ïãú ÎßàÏßÄÎßâ Ï£ºÎ¨∏Ïù∏ÏßÄ ÌôïÏù∏
     * ÎßàÏßÄÎßâ Í≤ΩÏö∞Ïùº Í≤ΩÏö∞Îßå Î™©Î°ùÏúºÎ°ú Ïù¥Îèô,
     * ÏïÑÎãå Í≤ΩÏö∞Îäî ÌéòÏù¥ÏßÄ Î®∏Î¨ºÎü¨ÏÑú ÌéòÏù¥ÏßÄÎßå Í∞±Ïã†
     */
    checkIsLastOrder () {
      let leftTask = 0
      this.orderTabs.forEach(tab => { if (tab.workEditable && !tab.isApproval) leftTask += 1 })

      // ÎßàÏßÄÎßâ Ï£ºÎ¨∏Ïùº Í≤ΩÏö∞ÏóêÎßå route Ïù¥Îèô
      if (leftTask > 1) return this.afterUpdatedHandler()
      else return this.$router.push({ name: 'task-conference' })
    },
    /**
     * ÏÑúÎ≤Ñ > ÏûêÏõê ÌÉ≠ÏóêÏÑú Ï†ÄÏû• Î≤ÑÌäº ÌÅ¥Î¶≠Ïãú orderList ÏóÖÎç∞Ïù¥Ìä∏
     * @param {Object}
     */
    async updateComputeData (updatedData) {
      this.saveUpdatedData('COMPUTE', updatedData)
    },
    updateMarketplaceData (updatedData) {
      this.saveUpdatedData('MARKET', updatedData)
    },
    updateDatabaseData (updatedData) {
      this.saveUpdatedData('DATABASE', updatedData)
    },
    updateStorageData (updatedData) {
      this.saveUpdatedData('STORAGE', updatedData)
    },
    async updateL4Data (updatedData) {
      this.saveUpdatedData('NETWORK_L4', updatedData)
    },
    updateL7Data (updatedData) {
      this.saveUpdatedData('NETWORK_L7', updatedData)
    },
    updateSecurityData (updatedData) {
      this.saveUpdatedData('SECURITY', updatedData)
    },
    /**
     * @param {String} type NETWORK_L4, COMPUTE ... Îì± ÌÉÄÏûÖÌïÑÏöî
     * @param {Array} data updatedÎêú Í∑∏Î¶¨Îìú ÌïÑÏöî
     */
    async saveUpdatedData (type, data) {
      // console.log('%c ÏÇ¥Î†§Ï£ºÏÑ∏Ïöî', 'color: #9AE2FF')
      const reqFormat = []
      this.orderTabs.forEach(tab => {
        tab.resourceList.forEach(list => {
          const resourceName = list.name === 'ova' ? 'compute' : list.name // ## [OVA] ova ÏûêÏõê  computeÏôÄ ÎèôÏùºÌïòÍ≤å Ï≤òÎ¶¨..
          if (list.editable && resourceName === type.toLowerCase()) {
            reqFormat.push(list.rawInfo)
            list.data = [...data] // update Îêú Îç∞Ïù¥ÌÑ∞Î•º Î∞îÎ°ú Ï†ÄÏû•Ìï©ÎãàÎã§
          }
        })
      })

      let updateData = []
      reqFormat.forEach(info => {
        const getData = info.orderDataList.filter(order => {
          if (order.workType === 'OVA' && type === 'COMPUTE') return order // ## [OVA] ova ÏûêÏõê  computeÏôÄ ÎèôÏùºÌïòÍ≤å Ï≤òÎ¶¨..
          else if (order.workType === type) return order
        })
        updateData = getData.map((dt, idx) => {
          dt.orderData = data[idx]
          return dt
        })
      })

      const payload = {
        userId: this.user?.userId,
        userName: this.user?.userName,
        userPosition: this.user?.userPosition,
        groupIdx: this.user?.userGroup,
        groupName: this.user?.userGroupName,
        taskDataList: updateData
      }

      try {
        await API.task.insertTaskData(payload)
        this.$alert(this.$t('common.ALERT.BASE.049'), { // Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§
          callback: () => {
            // Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞Î•º Îã§Ïãú Í∞ÄÏ†∏ÏòµÎãàÎã§.
            return this.afterUpdatedHandler()
          }
        })
      } catch (error) {
        console.error(error)
        // ÏûëÏóÖÏùÑ Î≥ÄÍ≤ΩÌïòÎäî ÎèÑÏ§ë Î¨∏Ï†úÍ∞Ä Î∞úÏÉùÌïòÏòÄÏäµÎãàÎã§. <br> Í¥ÄÎ¶¨ÏûêÏóêÍ≤å Î¨∏ÏùòÌï¥Ï£ºÏÑ∏Ïöî.
        this.$alert(this.$t('task.TODO.DETAIL.errorSave'), {
          dangerouslyUseHTMLString: true,
          callback: () => this.setDetailData()
        })
      }
    },
    /**
     * ÏÇ¨Ï†ÑÌòëÏùò Ï†ÄÏû• ÌõÑ Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞Î•º Îã§Ïãú ÏÑ∏ÌåÖÌï©ÎãàÎã§.
     */
    async afterUpdatedHandler () {
      const response = await this.getTaskPreDetail()

      // console.log(response, ' ---- ‚úÖ üê£ ConferenceDetail DATA')
      if (response) {
        this.orderDataList = [...response.orders]

        const taskSetting = this.orderDataList.filter(order => order.orderInfo.orderNo === this.selectedOrderItem.orderNo)[0]
        this.orderTabsOrigin = taskSetting.roles.map(role => {
          role.orderType = taskSetting.orderInfo.orderType.toLowerCase()

          return role
        })
        this.setOrderTabs(this.orderTabsOrigin)
      }
    },
    /**
     * @function - Î™®Îã¨ÏùÑ Îã´ÏùÑ Îïå Î™®Îì† valueÎ•º ÏÇ≠Ï†úÌï©ÎãàÎã§.
     */
    closeModal () {
      this.approveStep.visible = false
      this.failReason = ''
      this.rejectReason = ''

      // Î™®Îã¨Ïù¥ ÏÇ¨ÎùºÏßÄÍ∏∞ Ï†Ñ Îç∞Ïù¥ÌÑ∞Í∞Ä Î®ºÏ†Ä ÏÇ¨ÎùºÏßÄÎØÄÎ°ú 2Ï¥à Îí§Ïóê Î™®Îã¨ ÎÇ¥Ïö©ÏùÑ ÏÇ≠Ï†úÌï©ÎãàÎã§.
      setTimeout(() => { this.approveStep.currentStep = null }, 200)
    },
    async approvalReject () {
      // Ï†ïÎßê Î∞òÎ†§ Ï≤òÎ¶¨ ÌïòÏãúÍ≤†ÏäµÎãàÍπå?
      this.$confirm(this.$t('common.CONFIRM.CONF.006'), 'ÏïåÎ¶º', {
        confirmButtonText: this.$t('common.BTN.confirm'),
        cancelButtonText: this.$t('common.BTN.cancel')
      }).then(async () => {
        try {
          const payload = {
            approvalNo: this.$route.params.id,
            orderNo: this.selectedOrderItem?.orderNo,
            reason: this.rejectReason,
            userId: this.user.userId,
            userName: this.user.userName,
            userPosition: this.user.userPosition,
            groupIdx: this.user.userGroup,
            groupName: this.user.userGroupName
          }
          const res = await API.task.insertTaskPreReject(payload)
          if (res) {
            this.$alert(this.$t('common.ALERT.PROJECT.035')) // Î∞òÎ†§ Ï≤òÎ¶¨ ÎêòÏóàÏäµÎãàÎã§.
            this.$router.push({ name: 'task-list' })
          }
        } catch (error) {
          return this.isAlreadyProcessed(error)
        }
      }).catch(() => false)
    },
    /**
     * ÏÇ¨Ï†ÑÌòëÏùòÏóêÏÑú [Î≥ÄÍ≤Ω] Ïãú Î©îÎ™® insert Ìï†Îïå ÏÇ¨Ïö©ÌñàÏùå - @@ Deprecated
     */
    async sendMemo (memo, isAuto = false) {
      console.error('@@ Deprecated : sendMemo()')
      const user = this.user
      const orderNo = this.selectedOrderItem?.orderNo
      const memoData = {
        companyIdx: user.userCompany,
        companyName: user.userCompanyName,
        groupIdx: user.userGroup,
        groupName: user.userGroupName,
        memo,
        orderNo,
        isAuto,
        userId: user.userId,
        userName: user.userName,
        userPosition: user.userPosition
      }

      try {
        const insert = await API.task.insertMemo(memoData)

        if (insert) this.afterMemoUpdated()
      } catch (error) {
        console.error('@@@ insertMemo Error', error)
      }
    },
    // Î©îÎ™® Ï†ÑÏÜ° ÌõÑ Îç∞Ïù¥ÌÑ∞ refetch
    async afterMemoUpdated () {
      const response = await this.getTaskPreDetail()
      const memoListData = response.orders.filter(order => order.orderInfo.orderNo === this.selectedOrderItem?.orderNo)[0]

      const updateData = {
        approvalNo: this.memoLists.approvalNo,
        data: memoListData?.orderMemoList ? memoListData.orderMemoList : [],
        orderNo: this.selectedOrderItem?.orderNo
      }

      this.memoLists = { ...updateData }
      this.$forceUpdate()
    },
    // Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
    async updateTaskPreChkList (chkParam, roleInfo) {
      const userInfo = {
        companyIdx: this.user?.userCompany,
        companyName: this.user?.userCompanyName,
        groupIdx: this.user?.userGroup,
        groupName: this.user?.userGroupName,
        orderNo: this.selectedOrderItem?.orderNo,
        roleIdx: roleInfo?.roleIdx,
        userId: this.user?.userId,
        userName: this.user?.userName,
        userPosition: this.user?.userPosition
      }
      const payload = {
        ...userInfo,
        beforeCheckList: [...chkParam]
      }
      const res = await API.task.updateTaskPreChkList(payload)
      if (res) {
        this.$alert(this.$t('common.ALERT.CONF.009'))
      } else { this.$alert(this.$t('common.ALERT.CONF.010')) }
    }
  },
  data () {
    return {
      approvalStatus: true,
      viewApplyInfo: true,
      selectWorkTab: {},
      loading: false,
      loadingText: '',
      resourceList: [],
      blsmModal: false,
      selectedOrderItem: null,
      taskData: {},
      orderDataList: [],
      memoLists: [],
      approveStep: {
        visible: false,
        currentStep: ''
      },
      detailModal: {
        checkListModal: false,
        momoDropdownModal: false
      },
      failReason: '',
      rejectReason: '',
      orderInfo: null,
      orderTabs: [],
      orderTabsOrigin: [],
      showRejection: false,
      // ÏûêÏõê ÌÖåÏù¥Î∏î Îç∞Ïù¥ÌÑ∞
      computeGridData: [
        { id: 28, marketplaceInfo: 'ssgtest-IWEB 28', hostName: 'ssgtest-eWEB1', osVersion: 'CenTOS 7.6-7', ip: { status: { f: 'SDN', i: 'Ïô∏Î∂Ä' }, auto: true, address: '61.282.12' }, network: 'vlan', vcpu: '7', memory: 12, rootDisk: 50, externalDisk: '210Tb (10EA)', installProgram: [{ idx: 1, label: 'ÏÑ§ÏπòÌîÑÎ°úÍ∑∏Îû®1' }], clusterNode: { cluster: '', node: '' }, workResult: true }
      ],
      databaseGridData: [],
      storageGridData: [],
      marketplaceGridData: [],
      l4GridData: [],
      l7GridData: [],
      securityGridData: [],
      // Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏ ÏûÑÏãú Îç∞Ïù¥ÌÑ∞
      checkListExamData: [
        {
          id: 'itsm',
          title: 'ITSM',
          isCheckList: true,
          type: 'checkbox',
          setList: [
            { title: 'check List' },
            { title: 'check List' },
            { title: 'check List' }
          ]
        },
        {
          id: 'emergency',
          title: 'ÎπÑÏÉÅ Ïãú ÌñâÎèôÏöîÎ†π',
          isCheckList: true,
          type: 'checkbox',
          setList: [
            { title: 'check List' },
            { title: 'check List' },
            { title: 'check List' }
          ]
        }
      ],
      isAlreadyProcessed (error) {
        if (error.response.data.message === 'Rest Error : duplicate operation') {
          // Ïù¥ÎØ∏ Îã§Î•∏ Í¥ÄÎ¶¨ÏûêÍ∞Ä ÏäπÏù∏Ìïú ÏûêÏõêÏûÖÎãàÎã§. <br> ÏÇ¨Ï†ÑÌòëÏùò Î™©Î°ùÏúºÎ°ú ÎèåÏïÑÍ∞ëÎãàÎã§.
          this.$alert(this.$t('common.ALERT.PROJECT.058'), 'ÏïåÎ¶º', {
            dangerouslyUseHTMLString: true,
            confirmButtonText: this.$t('common.BTN.confirm'),
            callback: () => this.$router.push({ name: 'task-conference' })
          })
          return true
        } else return false
      }
    }
  }
}
</script>

<style lang="scss">
.conference-detail {
  .conference-section-title {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
    font-size: 18px;
  }
  .conference-body {
    .conf-lists {
      border-top: 1px solid $border-color;
    }
  }
  .panel-sub-title {
    font-size: 16px;
    font-weight: normal;
    margin: $gap 0;
  }

  .slide-enter-active,
  .slide-leave-active {
    transition: all .3s ease;
  }
  .slide-enter, .slide-leave-to {
    transform: translateY(-0px);
    opacity: 0;
  }
}

.conference-contents {
  position: relative;
  .conferenc-top-wrap {
    position: relative;
    display: flex;
    justify-content: space-between;
    margin-top: $gap;
    > .conference-title {
      font-size: 16px;
      font-weight: bold;
      color: $white;
    }
    .icon-button {
      color: $color-lightgrey;
      .icon-bubble {
        display: inline-block;
        margin-right: 5px;
        width: 22px;
        height: 21px;
        background-position: center;
        background-size: contain;
        background-repeat: no-repeat;
        background-image: url('../../../../../assets/images/icon-bubble@3x.png');
      }
    }
  }
  > article {
    border-radius: $radius-m;
    box-sizing: border-box;
  }

  .conf-process {
    // padding: $gap 0;
    margin-top: $gap-s;
    flex: 1 1 auto;

    .resource-area {
      & + .resource-area {
        margin-top: $gap-m;
      }
      .process-top-area {
        display: flex;
        align-items: center;
        // margin-bottom: $gap-s;
        > .sub-title {
          margin-bottom: 0;
        }
        > small {
          margin-left: $gap-s;
          font-size: 14px;
          color: #b4b4b4;
        }
      }
    }
  }
  .ip-grid {
    // border: 1px solid pink;
    display: flex;
    height: inherit;
  }
  .ip-info {
    margin-left: $gap-s;
    display: flex;
    align-items: center;
    > div {
      width: 120px;
      margin-right: $gap-s;
    }
    .ip-input {
      margin-right: $gap-s;
    }
  }

  .button-area {
    // margin-top: $gap;
    display: flex;
    justify-content: center;
  }

  .big-button-area {
    &.-bottom {
      margin-top: $gap * 2;
      padding-top: $gap;
      border-top: 1px solid $main-black;
    }
  }

}

.action-message {
  margin-bottom: $gap-m;
  line-height: 2;
  text-align: center;
}
</style>
